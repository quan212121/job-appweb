  <!DOCTYPE html>
  <html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang Cá Nhân Nguyễn Văn A</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Thư viện Solana Web3.js -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <style>
      /* Reset và thiết lập cơ bản */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        line-height: 1.6;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        padding-top: 70px; /* Khoảng cách cho thanh điều hướng cố định */
      }

      /* Navigation Menu */
      .nav-menu {
        background: rgba(255, 255, 255, 0.95);
        padding: 1rem 2rem;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .nav-menu .logo {
        font-size: 1.5rem;
        font-weight: bold;
        color: #667eea;
        text-decoration: none;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-links a {
        color: #333;
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        transition: all 0.3s ease;
      }

      .nav-links a:hover {
        background: #667eea;
        color: white;
      }

      .nav-links a.active {
        background: #667eea;
        color: white;
      }

      /* Header Styling */
      header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        width: 100%;
        max-width: 1200px;
        margin: 2rem auto;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      header h1 {
        color: #4a5568;
        font-size: 2rem;
        font-weight: 600;
        margin: 0;
      }

      header h1 i {
        margin-right: 0.5rem;
        color: #667eea;
      }

      /* Container Styling */
      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        flex-grow: 1;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-bottom: 2rem;
      }

      /* Card Styling */
      .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
        width: 100%;
        max-width: 800px;
        animation: fadeInUp 1s ease-out 0.4s both;
        position: relative;
      }

      .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
      }

      .candidate-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .candidate-avatar {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        font-weight: bold;
        color: white;
        flex-shrink: 0;
      }

      .candidate-info h2 {
        font-size: 1.8rem;
        color: #2d3748;
        margin-bottom: 0.5rem;
      }

      .candidate-title {
        color: #4a5568;
        font-size: 1.2rem;
      }

      .candidate-title i {
        margin-right: 0.5rem;
        color: #667eea;
      }

      .candidate-description {
        color: #4a5568;
        font-size: 1.1rem;
        line-height: 1.7;
        margin-bottom: 2rem;
        text-align: justify;
      }

      .candidate-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem; /* Thêm khoảng cách dưới cùng */
      }

      .detail-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        background: rgba(237, 242, 247, 0.7);
        border-radius: 8px;
        transition: transform 0.2s ease;
        color: #4a5568;
        font-size: 1rem;
      }

      .detail-item:hover {
        transform: translateY(-2px);
      }

      .detail-item i {
        color: #667eea;
        font-size: 1.2rem;
      }

      /* Styles for NFT Section */
      .nft-section {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }

      .nft-section h3 {
        font-size: 1.5rem;
        color: #2d3748;
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .nft-actions {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .nft-actions button {
        background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); /* Màu xanh lá cây */
        color: white;
        padding: 0.8rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .nft-actions button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      }

      .nft-actions button:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .nft-input-group {
        display: flex;
        flex-direction: column;
        gap: 0.8rem;
      }

      .nft-input-group label {
        font-weight: 600;
        color: #4a5568;
        font-size: 0.95rem;
      }

      .nft-input-group input {
        width: 100%;
        padding: 0.8rem 1rem;
        border: 1px solid #cbd5e0;
        border-radius: 8px;
        font-size: 1rem;
        color: #2d3748;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      .nft-input-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
      }

      .nft-certificates-list {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 1px dashed rgba(0, 0, 0, 0.1);
      }

      .nft-certificates-list h4 {
        font-size: 1.3rem;
        color: #2d3748;
        margin-bottom: 1rem;
        text-align: center;
      }

      .nft-certificates-list ul {
        list-style: none;
        padding: 0;
      }

      .nft-certificates-list li {
        background: rgba(237, 242, 247, 0.7);
        padding: 0.8rem 1.2rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
        color: #4a5568;
        font-size: 1rem;
      }

      .nft-certificates-list li i {
        color: #667eea;
        font-size: 1.1rem;
      }

      .status-message {
        margin-top: 1rem;
        padding: 0.8rem;
        border-radius: 8px;
        font-size: 0.95rem;
        text-align: center;
        display: none;
      }

      .status-message.success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
        display: block;
      }

      .status-message.error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
        display: block;
      }

      .status-message.info {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
        display: block;
      }

      /* Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .nav-menu {
          flex-direction: column;
          padding: 1rem;
        }
        
        .nav-links {
          flex-direction: column;
          width: 100%;
          gap: 0.5rem;
          margin-top: 1rem;
        }

        .nav-links a {
          width: 100%;
          text-align: center;
        }

        header {
          margin: 1rem auto;
          padding: 1rem;
        }

        header h1 {
          font-size: 1.8rem;
        }

        .container {
          padding: 0 0.5rem;
        }

        .card {
          padding: 1.5rem;
          max-width: 90%;
        }

        .candidate-header {
          flex-direction: column;
          text-align: center;
        }

        .candidate-avatar {
          width: 60px;
          height: 60px;
          font-size: 1.5rem;
        }

        .candidate-info h2 {
          font-size: 1.5rem;
        }

        .candidate-title {
          font-size: 1rem;
        }

        .candidate-description {
          font-size: 1rem;
        }

        .candidate-details {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .detail-item {
          padding: 0.8rem;
          font-size: 0.9rem;
        }

        .nft-actions button {
          font-size: 1rem;
          padding: 0.7rem 1rem;
        }

        .nft-input-group input {
          font-size: 0.9rem;
          padding: 0.7rem 0.8rem;
        }
      }
    </style>
  </head>
  <body>
    <nav class="nav-menu">
      <a href="../index.html" class="logo">
        <i class="fas fa-briefcase"></i> Job Portal
      </a>
      <div class="nav-links">
        <a href="../index.html"><i class="fas fa-search"></i> Tìm việc</a>
        <a href="../company-dashboard.html"><i class="fas fa-tachometer-alt"></i> Quản lý Doanh nghiệp</a>
      </div>
    </nav>

    <header>
      <h1><i class="fas fa-user-tie"></i> Trang Cá Nhân Nguyễn Văn A</h1>
    </header>

    <div class="container">
      <div class="card">
        <div class="candidate-header">
          <div class="candidate-avatar">NA</div>
          <div class="candidate-info">
            <h2>Nguyễn Văn A</h2>
            <p class="candidate-title"><i class="fas fa-code"></i> Lập trình viên Backend</p>
          </div>
        </div>
        
        <p class="candidate-description">
          Lập trình viên web với 3 năm kinh nghiệm trong việc phát triển các ứng dụng web hiệu suất cao. 
          Sở hữu kỹ năng mạnh về React, Node.js và MongoDB, luôn tìm kiếm cơ hội để đóng góp vào các dự án sáng tạo.
        </p>
        
        <div class="candidate-details">
          <div class="detail-item">
            <i class="fas fa-envelope"></i>
            nguyenvana@example.com
          </div>
          <div class="detail-item">
            <i class="fas fa-tools"></i>
            Kỹ năng: React, Node.js, MongoDB
          </div>
          <div class="detail-item">
            <i class="fas fa-briefcase"></i>
            Kinh nghiệm: 3 năm tại TechCorp
          </div>
          <div class="detail-item">
            <i class="fas fa-graduation-cap"></i>
            Học vấn: Cử nhân Khoa học Máy tính, Đại học Bách khoa Hà Nội
          </div>
          <div class="detail-item">
            <i class="fas fa-award"></i>
            Chứng chỉ AWS Certified Developer – Associate
          </div>
          <div class="detail-item">
            <i class="fas fa-certificate"></i>
            Chứng chỉ Google Cloud Professional Cloud Architect
          </div>
          <div class="detail-item">
            <i class="fas fa-code-branch"></i>
            Chứng chỉ Certified Kubernetes Administrator (CKA)
          </div>
          <div class="detail-item">
            <i class="fas fa-book-open"></i>
            Chứng chỉ TOEIC: 850
          </div>
        </div>

        <!-- Phần Chứng chỉ NFT Solana -->
        <div class="nft-section">
          <h3><i class="fas fa-cube"></i> Chứng chỉ NFT Solana</h3>
          <div class="nft-actions">
            <button id="connectWalletBtn">
              <i class="fas fa-wallet"></i> Kết nối Ví Phantom
            </button>
            <p id="walletStatus" class="status-message info">Chưa kết nối ví.</p>

            <div class="nft-input-group">
              <label for="nftMintAddress"><i class="fas fa-fingerprint"></i> Địa chỉ Mint NFT Solana:</label>
              <input type="text" id="nftMintAddress" placeholder="Ví dụ: 7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU" value="">
            </div>
            <button id="updateNftCertificatesBtn" disabled>
              <i class="fas fa-sync-alt"></i> Cập nhật Chứng chỉ từ NFT
            </button>
            <div id="nftUpdateMessage" class="status-message"></div>

            <button id="mintNftBtn" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);" disabled>
              <i class="fas fa-plus-circle"></i> Mint Chứng chỉ NFT (Demo)
            </button>
          </div>

          <div class="nft-certificates-list">
            <h4>Các Chứng chỉ đã Cập nhật từ NFT:</h4>
            <ul id="nftCertList">
              <li style="color: #999; font-style: italic;">
                <i class="fas fa-info-circle"></i>
                Chưa có chứng chỉ NFT nào được thêm
              </li>
            </ul>
          </div>
        </div>

      </div>
    </div>

    <!-- Load Solana Web3.js từ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/solana-web3.js/1.87.6/index.min.js"></script>
    
    <script>
      // Khởi tạo các biến global
      let connection = null;
      let connectedPublicKey = null;
      let isConnecting = false;

      // Lấy các elements
      const connectWalletBtn = document.getElementById('connectWalletBtn');
      const walletStatus = document.getElementById('walletStatus');
      const updateNftCertificatesBtn = document.getElementById('updateNftCertificatesBtn');
      const nftMintAddressInput = document.getElementById('nftMintAddress');
      const nftCertList = document.getElementById('nftCertList');
      const nftUpdateMessage = document.getElementById('nftUpdateMessage');
      const mintNftBtn = document.getElementById('mintNftBtn');

      // Hàm hiển thị thông báo
      function showMessage(element, message, type = 'info', duration = 5000) {
        element.textContent = message;
        element.className = `status-message ${type}`;
        
        if (duration > 0) {
          setTimeout(() => {
            element.style.display = 'none';
          }, duration);
        }
      }

      // Hàm kiểm tra và kết nối ví Phantom
      async function connectWallet() {
        if (isConnecting) return; // Ngăn chặn nhấp đúp

        try {
          isConnecting = true;
          connectWalletBtn.disabled = true;
          connectWalletBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang kết nối...';

          // Kiểm tra xem Phantom có được cài đặt không
          if (!window.solana || !window.solana.isPhantom) {
            showMessage(walletStatus, 'Ví Phantom chưa được cài đặt. Vui lòng cài đặt tại phantom.app', 'error', 0);
            throw new Error('Phantom Wallet not installed.'); // Throw error to stop execution
          }

          showMessage(walletStatus, 'Đang kết nối với ví Phantom. Vui lòng kiểm tra pop-up của ví để phê duyệt.', 'info', 0);

          // Kết nối với ví
          const response = await window.solana.connect();
          connectedPublicKey = response.publicKey;

          // Khởi tạo connection với Solana
          if (!connection) {
            connection = new solanaWeb3.Connection(
              'https://api.devnet.solana.com',
              'confirmed'
            );
          }

          // Cập nhật UI
          const address = connectedPublicKey.toBase58();
          const shortAddress = `${address.substring(0, 4)}...${address.substring(address.length - 4)}`;
          
          showMessage(walletStatus, `Đã kết nối: ${shortAddress}`, 'success', 0);
          connectWalletBtn.innerHTML = '<i class="fas fa-check"></i> Đã kết nối';
          connectWalletBtn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
          
          // Kích hoạt các nút khác
          updateNftCertificatesBtn.disabled = false;
          mintNftBtn.disabled = false;

          // Lắng nghe sự kiện thay đổi tài khoản
          window.solana.on('accountChanged', (publicKey) => {
            if (publicKey) {
              connectedPublicKey = publicKey;
              const newAddress = publicKey.toBase58();
              const newShortAddress = `${newAddress.substring(0, 4)}...${newAddress.substring(newAddress.length - 4)}`;
              showMessage(walletStatus, `Đã chuyển tài khoản: ${newShortAddress}`, 'info', 0); // Changed to info for account change
            } else {
              handleDisconnect();
            }
          });

          // Lắng nghe sự kiện ngắt kết nối
          window.solana.on('disconnect', handleDisconnect);

        } catch (error) {
          console.error('Lỗi kết nối ví:', error);
          
          if (error.code === 4001) { // Người dùng từ chối yêu cầu
            showMessage(walletStatus, 'Người dùng đã từ chối kết nối.', 'error');
          } else if (error.message.includes('Phantom Wallet not installed')) {
            showMessage(walletStatus, 'Ví Phantom chưa được cài đặt. Vui lòng cài đặt tại <a href="https://phantom.app/download" target="_blank" style="color: #667eea; text-decoration: underline;">phantom.app</a>.', 'error', 0);
          } else {
            showMessage(walletStatus, `Lỗi kết nối: ${error.message}`, 'error');
          }
          
          handleDisconnect(); // Đảm bảo các nút được reset
        } finally {
          isConnecting = false;
          // Nếu vẫn chưa kết nối được, reset nút
          if (!connectedPublicKey) {
            connectWalletBtn.disabled = false;
            connectWalletBtn.innerHTML = '<i class="fas fa-wallet"></i> Kết nối Ví Phantom';
            connectWalletBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)'; // Reset màu
          }
        }
      }

      // Hàm xử lý ngắt kết nối
      function handleDisconnect() {
        connectedPublicKey = null;
        connection = null;
        
        showMessage(walletStatus, 'Ví đã bị ngắt kết nối.', 'error');
        connectWalletBtn.innerHTML = '<i class="fas fa-wallet"></i> Kết nối Ví Phantom';
        connectWalletBtn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%)';
        connectWalletBtn.disabled = false;
        
        // Vô hiệu hóa các nút khác
        updateNftCertificatesBtn.disabled = true;
        mintNftBtn.disabled = true;
        
        // Xóa danh sách chứng chỉ
        nftCertList.innerHTML = '<li style="color: #999; font-style: italic;"><i class="fas fa-info-circle"></i> Chưa có chứng chỉ NFT nào được thêm</li>';
      }

      // Hàm mô phỏng cập nhật chứng chỉ NFT
      async function updateNftCertificates() {
        if (!connectedPublicKey) {
          showMessage(nftUpdateMessage, 'Vui lòng kết nối ví trước', 'error');
          return;
        }

        const mintAddress = nftMintAddressInput.value.trim();
        if (!mintAddress) {
          showMessage(nftUpdateMessage, 'Vui lòng nhập địa chỉ Mint NFT', 'error');
          return;
        }

        try {
          updateNftCertificatesBtn.disabled = true;
          updateNftCertificatesBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang kiểm tra...';
          
          showMessage(nftUpdateMessage, 'Đang kiểm tra NFT...', 'info', 0);

          // Mô phỏng việc kiểm tra NFT (trong thực tế sẽ gọi API backend)
          await new Promise(resolve => setTimeout(resolve, 2000));

          // Validate địa chỉ Solana
          try {
            new solanaWeb3.PublicKey(mintAddress);
          } catch (error) {
            throw new Error('Địa chỉ Mint không hợp lệ');
          }

          // Mô phỏng dữ liệu NFT
          const mockNftData = {
            name: "Chứng chỉ AWS Developer Associate",
            description: "Chứng nhận kỹ năng phát triển ứng dụng trên Amazon Web Services",
            image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzY2N2VlYSIvPgogIDx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TkZUPC90ZXh0Pgo8L3N2Zz4K",
            attributes: [
              { trait_type: "Tổ chức Cấp", value: "Amazon Web Services" },
              { trait_type: "Ngày Cấp", value: "2024-01-15" },
              { trait_type: "Loại", value: "Professional Certificate" }
            ]
          };

          // Hiển thị chứng chỉ
          nftCertList.innerHTML = '';
          const listItem = document.createElement('li');
          listItem.innerHTML = `
            <i class="fas fa-certificate"></i>
            <div>
              <strong>${mockNftData.name}</strong><br>
              <small>Mô tả: ${mockNftData.description}</small><br>
              <small>Tổ chức: ${mockNftData.attributes[0].value}</small><br>
              <small>Ngày cấp: ${mockNftData.attributes[1].value}</small><br>
              <small>Mint: ${mintAddress.substring(0, 8)}...${mintAddress.substring(mintAddress.length - 8)}</small>
            </div>
          `;
          nftCertList.appendChild(listItem);

          showMessage(nftUpdateMessage, 'Đã cập nhật chứng chỉ thành công!', 'success');

        } catch (error) {
          console.error('Lỗi cập nhật NFT:', error);
          showMessage(nftUpdateMessage, `Lỗi: ${error.message}`, 'error');
        } finally {
          updateNftCertificatesBtn.disabled = false;
          updateNftCertificatesBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Cập nhật Chứng chỉ từ NFT';
        }
      }

      // Hàm mô phỏng mint NFT
      async function mintNft() {
        if (!connectedPublicKey) {
          showMessage(nftUpdateMessage, 'Vui lòng kết nối ví trước', 'error');
          return;
        }

        try {
          mintNftBtn.disabled = true;
          mintNftBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang mint...';
          
          showMessage(nftUpdateMessage, 'Đang tạo NFT mới...', 'info', 0);

          // Mô phỏng quá trình mint (trong thực tế sẽ gọi API backend)
          await new Promise(resolve => setTimeout(resolve, 3000));

          // Tạo địa chỉ mint giả
          const mockMintAddress = solanaWeb3.Keypair.generate().publicKey.toBase58();
          
          // Tự động điền vào ô input
          nftMintAddressInput.value = mockMintAddress;

          showMessage(nftUpdateMessage, `NFT đã được mint thành công! Mint Address: ${mockMintAddress.substring(0, 8)}...${mockMintAddress.substring(mockMintAddress.length - 8)}`, 'success', 10000);

        } catch (error) {
          console.error('Lỗi mint NFT:', error);
          showMessage(nftUpdateMessage, `Lỗi mint NFT: ${error.message}`, 'error');
        } finally {
          mintNftBtn.disabled = false;
          mintNftBtn.innerHTML = '<i class="fas fa-plus-circle"></i> Mint Chứng chỉ NFT (Demo)';
        }
      }

      // Gắn sự kiện
      connectWalletBtn.addEventListener('click', connectWallet);
      updateNftCertificatesBtn.addEventListener('click', updateNftCertificates);
      mintNftBtn.addEventListener('click', mintNft);

      // Kiểm tra Phantom khi trang load
      document.addEventListener('DOMContentLoaded', () => {
        // Đợi một chút để Phantom load
        setTimeout(() => {
          if (window.solana && window.solana.isPhantom) {
            showMessage(walletStatus, 'Đã phát hiện ví Phantom. Nhấn để kết nối.', 'info', 0);
          } else {
            showMessage(walletStatus, 'Chưa phát hiện ví Phantom. Vui lòng cài đặt tại <a href="https://phantom.app/download" target="_blank" style="color: #667eea; text-decoration: underline;">phantom.app</a>.', 'error', 0);
          }
        }, 1000);

        // Auto-connect nếu đã được authorize trước đó
        if (window.solana && window.solana.isPhantom) {
          window.solana.connect({ onlyIfTrusted: true })
            .then((response) => {
              if (response.publicKey) {
                connectedPublicKey = response.publicKey;
                connection = new solanaWeb3.Connection('https://api.devnet.solana.com', 'confirmed');
                
                const address = connectedPublicKey.toBase58();
                const shortAddress = `${address.substring(0, 4)}...${address.substring(address.length - 4)}`;
                
                showMessage(walletStatus, `Tự động kết nối: ${shortAddress}`, 'success', 0);
                connectWalletBtn.innerHTML = '<i class="fas fa-check"></i> Đã kết nối';
                connectWalletBtn.style.background = 'linear-gradient(135deg, #28a745 0%, #20c997 100%)';
                
                updateNftCertificatesBtn.disabled = false;
                mintNftBtn.disabled = false;
              }
            })
            .catch(() => {
              // Không có quyền tự động kết nối, không làm gì
            });
        }
      });
    </script>
  </body>
  </html>