<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EduTech Innovation - Thông tin chi tiết</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    /* Navigation Menu */
    .nav-menu {
      background: rgba(255, 255, 255, 0.95);
      padding: 1rem 2rem;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .nav-menu .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #667eea;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
    }

    .nav-links a {
      color: #333;
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      background: #667eea;
      color: white;
    }

    .nav-links a.active {
      background: #667eea;
      color: white;
    }

    /* Reset và thiết lập cơ bản */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      line-height: 1.6;
      color: #333;
      padding-top: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 2rem;
      width: 100%;
    }

    .company-card {
      background: white;
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      position: relative;
    }

    .company-header {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
    }

    .company-logo {
      width: 100px;
      height: 100px;
      border-radius: 15px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2.5rem;
      margin-right: 2rem;
    }

    .company-info h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      color: #2d3748;
    }

    .company-industry {
      color: #667eea;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section {
      margin-bottom: 2rem;
    }

    .section-title {
      font-size: 1.5rem;
      color: #2d3748;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-content {
      color: #4a5568;
      font-size: 1.1rem;
      line-height: 1.8;
    }

    .benefits-list, .conditions-list, .certificates-list { /* Apply similar styles to conditions list and certificates list */
      list-style: none;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .benefit-item, .condition-item, .certificate-item { /* Apply similar styles to condition item and certificate item */
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(102, 126, 234, 0.1);
      padding: 1rem;
      border-radius: 10px;
      color: #2d3748;
      position: relative; /* Cho nút xóa */
    }

    .tech-stack {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 1rem;
    }

    .tech-item {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 500;
      position: relative; /* Cho nút xóa */
    }

    .job-requirements {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 1rem;
    }

    .job-position {
      background: rgba(102, 126, 234, 0.05);
      padding: 1.5rem;
      border-radius: 15px;
      border: 1px solid rgba(102, 126, 234, 0.1);
      position: relative; /* Cho nút xóa */
    }

    .job-position h3 {
      color: #2d3748;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .job-position ul {
      list-style: none;
      padding: 0;
    }

    .job-position ul li {
      color: #4a5568;
      margin-bottom: 0.5rem;
      padding-left: 1.5rem;
      position: relative;
    }

    .job-position ul li:before {
      content: "•";
      color: #667eea;
      position: absolute;
      left: 0;
    }

    /* Edit/Save Buttons */
    .edit-controls {
      text-align: right;
      margin-bottom: 2rem;
    }

    .edit-controls button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-left: 1rem;
    }

    .edit-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .edit-controls button.cancel {
      background: #e74c3c;
    }

    /* Editable Field Styles */
    .editable-field {
      border: 1px solid #ddd;
      padding: 0.5rem;
      border-radius: 5px;
      background-color: #f9f9f9;
      width: 100%;
      box-sizing: border-box;
      font-size: 1.1rem;
      line-height: 1.8;
      min-height: 30px; /* Cho phép co giãn */
    }

    .editable-input {
      border: 1px solid #ddd;
      padding: 0.5rem;
      border-radius: 5px;
      background-color: #f9f9f9;
      font-size: 1.1rem;
      width: 100%;
      box-sizing: border-box;
    }

    /* Add/Remove Buttons for lists */
    .add-item-btn {
      background: #28a745; /* Green */
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 1rem;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: background-color 0.2s ease;
    }

    .add-item-btn:hover {
      background: #218838;
    }

    .remove-item-btn {
      background: none;
      border: none;
      color: #e74c3c;
      font-size: 1.2rem;
      cursor: pointer;
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      transition: color 0.2s ease;
    }

    .remove-item-btn:hover {
      color: #c0392b;
    }

    .add-item-input-group {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .add-item-input-group input {
      flex-grow: 1;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-menu {
        flex-direction: column;
        padding: 1rem;
      }
      
      .nav-links {
        flex-direction: column;
        width: 100%;
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .nav-links a {
        width: 100%;
        text-align: center;
      }

      .container {
        padding: 0 1rem;
      }

      .company-card {
        padding: 1.5rem;
      }

      .company-header {
        flex-direction: column;
        text-align: center;
      }
      
      .company-logo {
        margin: 0 0 1rem 0;
      }
      
      .benefits-list, .conditions-list, .certificates-list {
        grid-template-columns: 1fr;
      }

      .job-requirements {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .edit-controls {
        text-align: center;
      }

      .edit-controls button {
        margin: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <nav class="nav-menu">
    <a href="../index.html" class="logo">
      <i class="fas fa-briefcase"></i> Job Portal
    </a>
    <div class="nav-links">
      <a href="#" class="active"><i class="fas fa-building"></i> Trang Doanh Nghiệp</a>
      <a href="../index.html"><i class="fas fa-search"></i> Tìm việc</a>
      <a href="../company-dashboard.html"><i class="fas fa-tachometer-alt"></i> Quản lý Doanh nghiệp</a>
    </div>
  </nav>

  <div class="container">
    <div class="edit-controls">
      <button id="editBtn"><i class="fas fa-edit"></i> Chỉnh sửa</button>
      <button id="saveBtn" style="display: none;"><i class="fas fa-save"></i> Lưu</button>
      <button id="cancelBtn" class="cancel" style="display: none;"><i class="fas fa-times"></i> Hủy</button>
    </div>

    <div class="company-card" id="companyCard">
      <!-- Nội dung công ty sẽ được render bởi JavaScript -->
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const companyCard = document.getElementById('companyCard');
      const editBtn = document.getElementById('editBtn');
      const saveBtn = document.getElementById('saveBtn');
      const cancelBtn = document.getElementById('cancelBtn');

      let isEditing = false;
      let originalCompanyData = {}; // Để lưu trữ dữ liệu gốc khi chỉnh sửa

      // Dữ liệu công ty mặc định cho EduTech Innovation
      const defaultCompanyData = {
        name: 'EduTech Innovation',
        logoText: 'EDU', // Logo text for EduTech
        industry: 'Giáo dục & Đào tạo',
        description: 'EduTech Innovation là nền tảng giáo dục trực tuyến hàng đầu tại Việt Nam, mang đến giải pháp học tập sáng tạo và hiệu quả. Chúng tôi kết hợp công nghệ và phương pháp giảng dạy tiên tiến để tạo ra trải nghiệm học tập tốt nhất.',
        courseList: [ // Changed from jobPositions to courseList for EduTech
          {
            title: 'Lập trình Web Full Stack',
            stats: '10,000+ học viên | 4.8★'
          },
          {
            title: 'Digital Marketing',
            stats: '8,500+ học viên | 4.7★'
          },
          {
            title: 'UI/UX Design',
            stats: '5,000+ học viên | 4.9★'
          }
        ],
        jobPositions: [ // Existing job positions
          {
            title: 'Content Creator',
            requirements: [
              'IELTS 6.5 trở lên',
              '2 năm kinh nghiệm sáng tạo nội dung',
              'Kỹ năng biên tập video tốt',
              'Mức lương: 15-25M + Thưởng'
            ]
          },
          {
            title: 'Instructional Designer',
            requirements: [
              '2 năm kinh nghiệm thiết kế giáo trình',
              'Kinh nghiệm với các công cụ E-learning',
              'Bằng cử nhân Giáo dục',
              'Mức lương: 20-30M + Thưởng'
            ]
          },
          {
            title: 'Education Consultant',
            requirements: [
              'Bằng Thạc sĩ Giáo dục',
              '3 năm kinh nghiệm tư vấn giáo dục',
              'Kỹ năng giao tiếp xuất sắc',
              'Mức lương: 25-35M + Thưởng'
            ]
          },
          {
            title: 'Digital Marketing',
            requirements: [
              'Chứng chỉ Google Digital Marketing',
              '2 năm kinh nghiệm marketing giáo dục',
              'Kỹ năng phân tích dữ liệu',
              'Mức lương: 18-28M + Thưởng'
            ]
          }
        ],
        benefits: [
          'Môi trường sáng tạo',
          'Chế độ làm việc linh hoạt',
          'Đào tạo chuyên sâu',
          'Bảo hiểm sức khỏe',
          'Thưởng theo dự án',
          'Hoạt động team building'
        ],
        entryConditions: [
          'Đam mê giáo dục và công nghệ',
          'Kỹ năng giải quyết vấn đề',
          'Khả năng làm việc độc lập và nhóm',
          'Tinh thần học hỏi liên tục'
        ],
        relatedCertificates: [ // New field for related certificates
          'Chứng chỉ TESOL/CELTA (dành cho giảng viên tiếng Anh)',
          'Chứng chỉ PMP (Project Management Professional)',
          'Chứng chỉ Google Certified Educator',
          'Chứng chỉ Microsoft Certified Educator'
        ],
        location: 'Tòa nhà Innovation, 789 Đường DEF, Hải Châu, Đà Nẵng',
        phone: '(0236) 3456 789',
        email: 'hr@edutech.vn'
      };

      // Tải dữ liệu từ localStorage hoặc sử dụng mặc định
      let companyData = JSON.parse(localStorage.getItem('edutechCompanyData')) || defaultCompanyData;

      // Hàm render giao diện
      const renderCompanyCard = () => {
        // Logo
        const companyLogoContent = companyData.logoText.startsWith('<i class="') ? companyData.logoText : `<span>${companyData.logoText}</span>`;

        let courseListHtml = companyData.courseList.map((course, index) => `
          <div class="course-item" ${isEditing ? 'contenteditable="true"' : ''} data-index="${index}" data-type="course">
            <div class="course-title">${course.title}</div>
            <div class="course-stats">${course.stats}</div>
            ${isEditing ? `<button class="remove-item-btn" data-type="course" data-index="${index}"><i class="fas fa-times-circle"></i></button>` : ''}
          </div>
        `).join('');

        let jobPositionsHtml = companyData.jobPositions.map((job, jobIndex) => `
          <div class="job-position">
            <h3 ${isEditing ? 'contenteditable="true"' : ''} data-job-index="${jobIndex}">${job.title}
              ${isEditing ? `<button class="remove-item-btn" data-type="job" data-index="${jobIndex}"><i class="fas fa-times-circle"></i></button>` : ''}
            </h3>
            <ul>
              ${job.requirements.map((req, reqIndex) => `
                <li ${isEditing ? 'contenteditable="true"' : ''} data-job-index="${jobIndex}" data-req-index="${reqIndex}">${req}
                  ${isEditing ? `<button class="remove-item-btn" data-type="requirement" data-job-index="${jobIndex}" data-index="${reqIndex}"><i class="fas fa-times-circle"></i></button>` : ''}
                </li>
              `).join('')}
              ${isEditing ? `
                <div class="add-item-input-group">
                  <input type="text" placeholder="Thêm yêu cầu mới" data-job-index="${jobIndex}" class="new-requirement-input">
                  <button class="add-item-btn add-requirement-btn" data-job-index="${jobIndex}"><i class="fas fa-plus"></i></button>
                </div>
              ` : ''}
            </ul>
          </div>
        `).join('');

        let benefitsHtml = companyData.benefits.map((benefit, index) => `
          <li class="benefit-item" ${isEditing ? 'contenteditable="true"' : ''} data-index="${index}">
            <i class="fas fa-check-circle"></i> ${benefit}
            ${isEditing ? `<button class="remove-item-btn" data-type="benefit" data-index="${index}"><i class="fas fa-times-circle"></i></button>` : ''}
          </li>
        `).join('');

        let entryConditionsHtml = companyData.entryConditions.map((condition, index) => `
          <li class="condition-item" ${isEditing ? 'contenteditable="true"' : ''} data-index="${index}">
            <i class="fas fa-check-circle"></i> ${condition}
            ${isEditing ? `<button class="remove-item-btn" data-type="condition" data-index="${index}"><i class="fas fa-times-circle"></i></button>` : ''}
          </li>
        `).join('');

        let relatedCertificatesHtml = companyData.relatedCertificates.map((cert, index) => `
          <li class="certificate-item" ${isEditing ? 'contenteditable="true"' : ''} data-index="${index}">
            <i class="fas fa-certificate"></i> ${cert}
            ${isEditing ? `<button class="remove-item-btn" data-type="certificate" data-index="${index}"><i class="fas fa-times-circle"></i></button>` : ''}
          </li>
        `).join('');


        companyCard.innerHTML = `
          <div class="company-header">
            <div class="company-logo">${companyLogoContent}</div>
            <div class="company-info">
              <h1 ${isEditing ? 'contenteditable="true"' : ''} id="companyName">${companyData.name}</h1>
              <p class="company-industry">
                <i class="fas fa-graduation-cap"></i>
                <span ${isEditing ? 'contenteditable="true"' : ''} id="companyIndustry">${companyData.industry}</span>
              </p>
            </div>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-info-circle"></i>
              Giới thiệu
            </h2>
            <p class="section-content" ${isEditing ? 'contenteditable="true"' : ''} id="companyDescription">${companyData.description}</p>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-book"></i>
              Khóa học nổi bật
            </h2>
            <div class="course-list" id="courseList">
              ${courseListHtml}
              ${isEditing ? `
                <div class="add-item-input-group">
                  <input type="text" placeholder="Thêm khóa học mới (Tên | Thống kê)" id="newCourseInput">
                  <button class="add-item-btn" id="addCourseBtn"><i class="fas fa-plus"></i></button>
                </div>
              ` : ''}
            </div>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-briefcase"></i>
              Vị trí tuyển dụng
            </h2>
            <div class="job-requirements" id="jobPositionsList">
              ${jobPositionsHtml}
              ${isEditing ? `
                <button class="add-item-btn" id="addJobBtn"><i class="fas fa-plus"></i> Thêm Vị trí mới</button>
              ` : ''}
            </div>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-gift"></i>
              Phúc lợi
            </h2>
            <ul class="benefits-list" id="benefitsList">
              ${benefitsHtml}
              ${isEditing ? `
                <div class="add-item-input-group">
                  <input type="text" placeholder="Thêm phúc lợi mới" id="newBenefitInput">
                  <button class="add-item-btn" id="addBenefitBtn"><i class="fas fa-plus"></i></button>
                </div>
              ` : ''}
            </ul>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-clipboard-check"></i>
              Điều kiện để được vào doanh nghiệp
            </h2>
            <ul class="conditions-list" id="entryConditionsList">
              ${entryConditionsHtml}
              ${isEditing ? `
                <div class="add-item-input-group">
                  <input type="text" placeholder="Thêm điều kiện mới" id="newConditionInput">
                  <button class="add-item-btn" id="addConditionBtn"><i class="fas fa-plus"></i></button>
                </div>
              ` : ''}
            </ul>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-certificate"></i>
              Chứng chỉ liên quan
            </h2>
            <ul class="certificates-list" id="relatedCertificatesList">
              ${relatedCertificatesHtml}
              ${isEditing ? `
                <div class="add-item-input-group">
                  <input type="text" placeholder="Thêm chứng chỉ mới" id="newCertificateInput">
                  <button class="add-item-btn" id="addCertificateBtn"><i class="fas fa-plus"></i></button>
                </div>
              ` : ''}
            </ul>
          </div>

          <div class="section">
            <h2 class="section-title">
              <i class="fas fa-map-marker-alt"></i>
              Địa điểm
            </h2>
            <p class="section-content">
              <i class="fas fa-building"></i> <span ${isEditing ? 'contenteditable="true"' : ''} id="companyLocation">${companyData.location}</span>
              <br>
              <i class="fas fa-phone"></i> <span ${isEditing ? 'contenteditable="true"' : ''} id="companyPhone">${companyData.phone}</span>
              <br>
              <i class="fas fa-envelope"></i> <span ${isEditing ? 'contenteditable="true"' : ''} id="companyEmail">${companyData.email}</span>
            </p>
          </div>
        `;

        // Gắn lại các sự kiện sau khi render
        attachEventListeners();
      };

      // Hàm gắn các sự kiện
      const attachEventListeners = () => {
        // Sự kiện xóa mục
        companyCard.querySelectorAll('.remove-item-btn').forEach(btn => {
          btn.addEventListener('click', (event) => {
            const type = event.target.dataset.type || event.target.closest('button').dataset.type;
            const index = parseInt(event.target.dataset.index || event.target.closest('button').dataset.index);
            const jobIndex = parseInt(event.target.dataset.jobIndex || event.target.closest('button').dataset.jobIndex);

            if (type === 'course') { // Xử lý xóa khóa học
              companyData.courseList.splice(index, 1);
            } else if (type === 'job') {
              companyData.jobPositions.splice(index, 1);
            } else if (type === 'requirement') {
              companyData.jobPositions[jobIndex].requirements.splice(index, 1);
            } else if (type === 'benefit') {
              companyData.benefits.splice(index, 1);
            } else if (type === 'condition') {
              companyData.entryConditions.splice(index, 1);
            } else if (type === 'certificate') {
              companyData.relatedCertificates.splice(index, 1);
            }
            renderCompanyCard();
          });
        });

        // Sự kiện thêm khóa học mới
        if (isEditing) {
          const addCourseBtn = document.getElementById('addCourseBtn');
          if (addCourseBtn) {
            addCourseBtn.addEventListener('click', () => {
              const newCourseInput = document.getElementById('newCourseInput');
              const newCourseText = newCourseInput.value.trim();
              if (newCourseText) {
                const parts = newCourseText.split('|').map(s => s.trim());
                if (parts.length >= 2) {
                  companyData.courseList.push({ title: parts[0], stats: parts.slice(1).join(' | ') });
                } else {
                  companyData.courseList.push({ title: newCourseText, stats: '' });
                }
                newCourseInput.value = '';
                renderCompanyCard();
              }
            });
          }

          // Sự kiện thêm vị trí mới
          const addJobBtn = document.getElementById('addJobBtn');
          if (addJobBtn) {
            addJobBtn.addEventListener('click', () => {
              companyData.jobPositions.push({ title: 'Vị trí mới', requirements: ['Yêu cầu 1', 'Yêu cầu 2'] });
              renderCompanyCard();
            });
          }

          // Sự kiện thêm yêu cầu mới cho từng vị trí
          companyCard.querySelectorAll('.add-requirement-btn').forEach(btn => {
            btn.addEventListener('click', (event) => {
              const jobIndex = parseInt(event.target.dataset.jobIndex || event.target.closest('button').dataset.jobIndex);
              const input = event.target.closest('.add-item-input-group').querySelector('.new-requirement-input');
              const newReq = input.value.trim();
              if (newReq) {
                companyData.jobPositions[jobIndex].requirements.push(newReq);
                input.value = '';
                renderCompanyCard();
              }
            });
          });

          // Sự kiện thêm phúc lợi mới
          const addBenefitBtn = document.getElementById('addBenefitBtn');
          if (addBenefitBtn) {
            addBenefitBtn.addEventListener('click', () => {
              const newBenefitInput = document.getElementById('newBenefitInput');
              const newBenefit = newBenefitInput.value.trim();
              if (newBenefit) {
                companyData.benefits.push(newBenefit);
                newBenefitInput.value = '';
                renderCompanyCard();
              }
            });
          }

          // Sự kiện thêm điều kiện mới
          const addConditionBtn = document.getElementById('addConditionBtn');
          if (addConditionBtn) {
            addConditionBtn.addEventListener('click', () => {
              const newConditionInput = document.getElementById('newConditionInput');
              const newCondition = newConditionInput.value.trim();
              if (newCondition) {
                companyData.entryConditions.push(newCondition);
                newConditionInput.value = '';
                renderCompanyCard();
              }
            });
          }

          // SỰ KIỆN THÊM CHỨNG CHỈ MỚI
          const addCertificateBtn = document.getElementById('addCertificateBtn');
          if (addCertificateBtn) {
            addCertificateBtn.addEventListener('click', () => {
              const newCertificateInput = document.getElementById('newCertificateInput');
              const newCertificate = newCertificateInput.value.trim();
              if (newCertificate) {
                companyData.relatedCertificates.push(newCertificate);
                newCertificateInput.value = '';
                renderCompanyCard();
              }
            });
          }
        }
      };

      // Chuyển đổi chế độ chỉnh sửa
      editBtn.addEventListener('click', () => {
        isEditing = true;
        originalCompanyData = JSON.parse(JSON.stringify(companyData)); // Sao chép sâu dữ liệu gốc
        editBtn.style.display = 'none';
        saveBtn.style.display = 'inline-block';
        cancelBtn.style.display = 'inline-block';
        renderCompanyCard();
      });

      // Lưu thay đổi
      saveBtn.addEventListener('click', () => {
        isEditing = false;
        // Cập nhật dữ liệu từ các trường contenteditable
        companyData.name = document.getElementById('companyName').textContent.trim();
        companyData.industry = document.getElementById('companyIndustry').textContent.trim();
        companyData.description = document.getElementById('companyDescription').textContent.trim();
        companyData.location = document.getElementById('companyLocation').textContent.trim();
        companyData.phone = document.getElementById('companyPhone').textContent.trim();
        companyData.email = document.getElementById('companyEmail').textContent.trim();

        // Cập nhật course list
        companyData.courseList = Array.from(companyCard.querySelectorAll('.course-list .course-item[contenteditable="true"]'))
                                    .map(el => {
                                      const title = el.querySelector('.course-title').textContent.trim();
                                      const stats = el.querySelector('.course-stats').textContent.trim();
                                      return { title, stats };
                                    });

        // Cập nhật job positions và requirements
        companyData.jobPositions.forEach((job, jobIndex) => {
          const jobElement = companyCard.querySelector(`.job-position h3[data-job-index="${jobIndex}"]`);
          if (jobElement) {
            job.title = jobElement.textContent.trim();
          }
          const reqElements = companyCard.querySelectorAll(`.job-position ul li[data-job-index="${jobIndex}"][contenteditable="true"]`);
          job.requirements = Array.from(reqElements).map(el => el.textContent.replace('•', '').trim());
        });

        // Cập nhật benefits
        companyData.benefits = Array.from(companyCard.querySelectorAll('.benefits-list .benefit-item[contenteditable="true"]'))
                                    .map(el => el.textContent.replace('•', '').trim());

        // Cập nhật entry conditions
        companyData.entryConditions = Array.from(companyCard.querySelectorAll('.conditions-list .condition-item[contenteditable="true"]'))
                                    .map(el => el.textContent.replace('•', '').trim());
        
        // CẬP NHẬT CHỨNG CHỈ LIÊN QUAN MỚI
        companyData.relatedCertificates = Array.from(companyCard.querySelectorAll('.certificates-list .certificate-item[contenteditable="true"]'))
                                    .map(el => el.textContent.replace('•', '').trim());

        localStorage.setItem('edutechCompanyData', JSON.stringify(companyData)); // Lưu với key riêng
        editBtn.style.display = 'inline-block';
        saveBtn.style.display = 'none';
        cancelBtn.style.display = 'none';
        renderCompanyCard();
      });

      // Hủy thay đổi
      cancelBtn.addEventListener('click', () => {
        isEditing = false;
        companyData = JSON.parse(JSON.stringify(originalCompanyData)); // Khôi phục dữ liệu gốc
        editBtn.style.display = 'inline-block';
        saveBtn.style.display = 'none';
        cancelBtn.style.display = 'none';
        renderCompanyCard();
      });

      // Render giao diện lần đầu
      renderCompanyCard();
    });
  </script>
</body>
</html>
